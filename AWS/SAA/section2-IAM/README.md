# AWS Identity and Access Management(IAM)

## IAM 개요
- AWS 계정 및 권한 관리 서비스
- 사용자, 그룹, 역할, 정책으로 구성
- 리전에 속하는 서비스가 아닌 글로벌 서비스
- 계정 보안 강화를 위한 권장 사항
  - 루트 계정 (AWS회원 가입시 만들어지는 계정)은 최초 사용자 계정 생성 이후 가능하면 사용하지 말 것
  - 사용자 계정(IAM 계정)으로 서비스를 사용하고 사용자는 필요한 최소한의 권한만 부여(최소권한의 원칙)
  - 루트계정과 개별 사용자 계정에 강력한 암호 정책과 멀티팩터 인증(MFA) 적용
  - 사용자의 암호에 대한 복잡성 요구 사항과 의무 교체 주기를 정의

### 사용자 
- 개인 또는 애플리케이션을 위한 특정 권한을 가진 ID
### 그룹
- 개발팀, 운영팀 등의 사용자의 집합
### 역할
- 특정 개인에 속하지 않은 특정 권한을 가진 ID
### 정책
- 할 수 있는 것과 할 수 없는 것에 대한 권한 정의
- 사용자, 그룹, 역할에 연결 하여 사용
- JSON 문서 형식으로 구성

## IAM 사용자
- 단일 개인 또는 애플리케이션에 대한 특정 권한을 가지고 있는 AWS 계정 내 자격 증명
- 한 사람과만 연관(한 명의 실제 사용자)
- 암호 또는 액세스 키와 같은 장기 자격 증명을 통해 액세스
- IAM -> 계정 설정 -> 암호 정책 -> IAM 사용자에 대한 암호 정책을 변경할 수 있다.
- 계정 -> 보안 자격 증명 -> MFA 설정 가능
- IAM -> 사용자 -> 사용자 생성 -> 사용자 이름 입력 -> AWS Management Console 체크
-> IAM 사용자를 생성하고 싶음 체크 -> 사용자 지정 암호
- 그룹 생성 -> AdministratorAccess 할당 -> 생성
- 사용자 -> 이름 -> 액세스 키 만들기 -> 로컬 코드 등등

## IAM 정책
- AWS 리소스에 대한 액세스 권한을 정의 한 것
- 사용자, 그룹, 역할에 정책을 연결하여 사용
- JSON 문서 형식으로 이루어짐
- 정책이 명시되지 않는 경우 기본적으로 모든 요청이 거부(Deny) 됨
```json
{
  "Statement" : [{
    "Effect" : "effect",
    "Action" : "action",
    "Resource" : "arn",
    "Condition" : {
      "condition" : {
        "key" : "value"
      }
    }
  }]
}
```
- Effect : Allow 또는 Deny를 사용하여 명시도니 정책에 대해 액세스 허용 또는 거부
- Action : 정책이 허용하거나 거부하는 작업 목록
- Resource : 작업이 적용되는 리소스
- Condition : 정책이 적용된느 세부 조건(옵션 사항)

## IAM - 자격 증명 기반 정책
### 관리형 정책
- AWS 계정에 속한 다수의 사용자, 그룹 및 역할에 연결할 수 있는 정책
  - AWS 관리형 정책 - AWS에서 생성 및 관리
  - 고객 관리형 정책 - 사용자가 생성 및 관리

### 인라인 정책
- 단일 사용자, 그룹 또는 역할에 직접 추가하는 정책

## IAM - 권한 경계(Permission Boundary)
- IAM 사용자 또는 역할에 최대 권한을 제한 하는기능
- 예, IAM 사용자에게 Amazon S3, Amazon CloudWatch 및 Amazon EC2만 관리할 수 있게 하려면 아래와 같은 정책을 적용
- AWS 전체 권한을 가지고 있어도 권한 경계에 대한 권한 범위로 축소되어 적용됨
```json
{
  "Version" : "2012-10-17",,
  "Statement" : [{
    "Effect" : "Allow",
    "Action" : [
      "s3",
      "cloudwatch",
      "ec2"
    ],
    "Resource" : "arn"
  }]
}
```