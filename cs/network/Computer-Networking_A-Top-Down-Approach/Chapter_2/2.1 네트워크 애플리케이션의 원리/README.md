# 2.1 네트워크 애플리케이션의 원리
## 2.1.1 네트워크 애플리케이션 구조

### 클라이언트 - 서버 구조
![스크린샷 2023-10-27 오후 11 56 18](https://github.com/jisu3316/til/assets/95600042/af390af8-a421-4e6d-a7da-f3afca18374f)

<br/>

항상 동작하고 있는 호스트를 서버라고 부른다.  
서버와의 서비스는 클라이언트라는 다른 호스트들로부터 서비스 요청을 받는다.  
서버가 고정 IP 주소를 갖는다. 서버는 항상 동작하고 있으므로 클라이언트는 서버 주소로 패킷을 보내서 언제든지
서버에 연결할 수 있다.  

### P2P 구조
![스크린샷 2023-10-27 오후 11 58 57](https://github.com/jisu3316/til/assets/95600042/e0423000-168c-474a-ad76-5cb9ceceedd5)

<br/>

항상 켜져 있는 인프라 스트럭처 서버에 최소로 의존한다.(혹은 전혀 의존하지 않음).  
대신에 애플리케이션은 피어라는 간헐적으로 연결된 호스트 쌍이 서로 직접 통신하게 된다.  
피어는 서비스 제공자가 소유하지 않고 사용자들이 제어하는 데스크톱과 랩톱이며, 대부분의 피어들은 가정, 대학, 사무실에 위치한다.  
특정 서버를 통하지 않고 피얻가 통신하므로 이 구조를 피어 투 피어라고한다.  
가장 인기 있는 P2P 애플리케이션은 파일 공유 애플리케이션인 비트토렌트이다.  

자가 확장성이 있다.  
P2P 애플리케이션은 많은 수의 피어들이 동시에 존재할 수 있으므로, 피어들의 수가 증가하면 서비스 용량도 증가한다.  


## 2.1.2 프로세스간 통신
운영체제 용어에서 실제 통신하는 것은 프로그램이 아니라 프로세스이다.  
2개의 종단 시스템에서 프로세스는 컴퓨터 네트워크를 통한 메시지 교환으로 서로 통신한다.  
송신 프로세스는 메시지를 만들어서 네트워크로 보낸다.

### 클라이언트와 서버 프로세스
네트워크 애플리케이션은 네트워크에서 서로 메시지를 보내는 두 프로세스로 구성된다.  
웹에서 브라우저는 클라이언트 프로세스이고 웹 서버는 서버 프로세스이다.  
P2P 파일 공유에서는 파일을 내려받는 피어를 클라이언트라 하고 파일을 올리는 피어를 서버라고 한다.  

두 프로세스 간의 통신 세션에서 통신을 초기화(다른 프로세스와 세션을 시작하려고 접속을 초기화)하는 프로세스를 클라이언트라 하고,  
세션을 시작하기 위해 접속을 기다리는 프로세스를 서버라고한다.  

### 프로세스와 컴퓨터 네트워크 사이의 인터페이스
프로세스는 소켓을 통해 네트워크로 메시지를 보내고 받는다.  

#### 소켓의 이해
프로세스는 집이고 소켓은 출입구로 비유된다.  
프로세스가 메시지를 다른 호스트의 프로세스로 보내고 싶을때, 그것은 출입구(소켓) 바깥 네트워크로 메시지를 밀어낸다.  
메시지가 목적지 호스트에 도착하면 메시지는 수신 프로세스의 출입구를 거치고 수신 프로세스는 메시지를 처리한다.  

![스크린샷 2023-10-28 오전 12 20 58](https://github.com/jisu3316/til/assets/95600042/f1333860-1364-49bc-a7ab-cfce18991bf3)

<br/>

그림에서 볻스이 소켓은 호스트의 애플리케이션 계층과 트랜스포트 계층 간의 인터페이스이다.  
또한 소켓은 네트워크 애플리케이션이 인터넷에 만든 프로그래밍 인터페이스이므로 애플리케이션과 네트워크 사이의 API라고도한다.  


### 프로세스 주소 배정
호스트의 주소와 목적지 호스트 내의 수신 프로세스를 명시하는 식별자 두가지를 알아야 한다.  
인터넷에서 호스트는 IP주소로 식별된다.  
수신호스트는 수신 호스트에서 수행되고 있는 수신 프로새스도 식별해야 한다.  
이 정보는 포트 번호로 식별된다.  
웹 서버 80, 메잀 서버 25번으로 식별.

## 2.1.3 애플리케이션이 이용 가능한 트랜스포트 서비스
인터넷을 포함해서 많은 네트워크는 하나 이상의 트랜스포트 프로토콜을 제공한다.  
신뢰적 데이터 전송, 처리율, 시간, 보안 이라는 네가지 차원으로 분류할 수 있다. 

### 신뢰적 데이터 전송
패킷들은 네트워크에서 손실될 수 있다.   
프로토콜이 보장된 데이터 전송 서비스를 제공한다면 신뢰적 데이터 전송을 제공한다고 한다.  

트랜스포트 계층 프로토콜이 신뢰적 데이터 전송을 제공하지 않을때 송신 프로세스가 보낸 데이터는 수신 프로세스에 도착 안할수도 있음.  
손실 허용 애플리케이션 : 오디오, 비디오 스트리밍, 실시간 음성 통화 등에서는 받아들여질 수 있다.


### 처리율
처리율 요구사항을 갖는 애플리케이션은 대역폭 민감 애플리케이션이라고 한다.  
어떤 멀티미디어 애플리케이션들은 현재 가용한 처리율에 맞는 속도로 디지털화된 음성 혹은
비디오를 인코딩하는 적응적 코딩 기법을 사용할 수도 있지만, 현존하는 많은 멀티미디
어 애플리케이션은 대역폭에 민감하다.  
대역폭 민감 애플리케이션들이 특정 처리율 요구사항을 갖고 있는 반면에, 탄력적 애플리케이션(elastic application)은 
가용한 처리율을 많으면 많은 대로 적으면 적은 대로 이용할수 있다.  
전자메일, 파일 전송, 웹 전송이 융통성 있는 애플리케이션이다. 물론 대역폭은 많으면 많을수록 좋다.


### 시간
트랜스포트 계층 프로토콜은 또한 시간 보장을 제공할 수 있다.  
인터넷 전화, 가상 환경, 원격회의 같은 실시간 상호작용 애플리케이션에 매력적이다.


## 2.1.3 인터네 전송 프로토콜이 제공하는 서비스
인터넷이 제공한느 애플리케이션 지원 유형을 살펴본다.

### TCP
TCP는 연결지향형 서비스와 신뢰적인 데이터 전송 서비스를 제공한다.
![스크린샷 2023-10-28 오전 12 55 28](https://github.com/jisu3316/til/assets/95600042/0a7417bb-3648-4cf0-9b42-31d3b369999f)

<br/>

애플리케이션이 TCP 전송 프로토콜을 사용하면, 애플리케이션은 TCP로부터 이 두가지 서비스를 받는다.

- 연결지향형 서비스: 애플리케이션 계층 메시지를 전송하기 전에 TCP는 클라이언트와 서버가 서로 전송 제어 정보를 교환하게 한다. 
이 핸드셰이킹 과정이 클라이언트와 서버에 패킷이 곧 도달할 테니 준비하라고 알려주는 역할을 한다. 핸드셰이킹 단계를
지나면, TCP 연결이 두 프로세스의 소켓 사이에 존재한다고 말한다. 이 연결은 두 프로세스가 서로에게 동시에 메시지를 보낼 수 있기에 전이중（fiill-duplex） 연결이라고 한다. 애플리케이션이 메시지 전송을 마치면 연결을 끊어야 한다. 3장에서 연결지 향형 서비스와 그 구현 등을 자세히 다룬다.

- 신뢰적인 데이터 전송 서비스: 통신 프로세스는 모든 데이터를 오류 없이 올바른 순서로 전달하기 위해 TCP에 의존한다. 
TCP는 애플리케이션의 한쪽이 바이트 스트림을 소켓으로 전달하면 그 바이트 스트림이 손실되거나 중복되지 않게 수신 소켓으로 전달한다.

### UDP
UDP는 비연결형 서비스와 비신뢰적인 데이터 전송 서비스를 제공한다.  
핸드셰이킹을  하지 않으므로 TCP보다 빠르지만 메시지가 도착하는것을 보장하지 않는다.

### 인터넷 트랜스포트 프로토콜이 제공하지 않는 서비스

![스크린샷 2023-10-28 오전 1 03 07](https://github.com/jisu3316/til/assets/95600042/12b083bd-5403-4d70-823a-1b7774806db2)

<br/>

처리율 혹은 시간 보장에 대한 언급이 없다고 해서 인터넷 전화 같은 시간 민감 어플리케이션은 인터넷을 사용할 수 없는 것은 아니다.
인터넷 전화는 UDP를 사용한다.
하지만 많은 방화벽이 UDP 트래픽을 차단하게 되어 있으므로 통신이 실패할 경우 TCP를 사용한다.


## 2.1.5 애플리케이션 계층 프로토콜
네트워크 프로세스는 소켓으로 메시지를 보냄으로써 통신한다.  
애플리케이션  계층 프로토콜은 다른 종단 시스템에서 실행되는 애플리케이션의 프로세스가 서로 메시지를 보내는 방법을 정의한다.  

- 교환 메시지 타입(예: 요청 메시지와 응답 메시지)
- 여러 메시지 타입의 문법(예: 메시지 내부의 필드와 필드 간의 구별 방법)
- 필드의 의미, 즉 필드에 있는 정보의 의미
- 언제, 어떻게 프로세스가 메시지를 전송하고 메시지에 응답하는지 결정하는 규칙

HTTP는 브라우저와 웹 서버 사이에서 교환되는 메시지의 포맷과 순서를 정의한다. 
따라서 HTTP는 애플리케이션 계층 프로토콜이다.
